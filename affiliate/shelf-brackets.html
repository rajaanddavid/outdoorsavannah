<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shelf Brackets - Raja and David&reg; - Raja and David®</title>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        width: 100%;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #f5f5f5;
    }

    .profile-circle {
        width: 90vw;
        max-width: 400px;
        aspect-ratio: 1;
        border-radius: 50%;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .profile-circle img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

        /* Dark mode adjustments */
    @media (prefers-color-scheme: dark) {
        /* Background and text colors for Kadence theme */
        body,
        .site,
        .site-content,
        .content-bg,
        article,
        .entry-content {
            background-color: #0d0d0d !important;
            color: #f0f0f0 !important;
        }

    /* CookieYes Banner - try multiple selectors */
    div[id*="cookie"],
    div[class*="cookie"],
    div[class*="cky"],
    .cky-consent-container,
    .cky-consent-bar,
    [data-cky-tag="detail"],
    [data-cky-tag="notice"] {
        background-color: #1a1a1a !important;
        color: #f0f0f0 !important;
    }

    /* CookieYes text */
    div[id*="cookie"] span,
    div[id*="cookie"] p,
    div[id*="cookie"] div,
    div[class*="cookie"] span,
    div[class*="cookie"] p,
    div[class*="cky"] span,
    div[class*="cky"] p {
        color: #f0f0f0 !important;
    }

    /* CookieYes buttons */
    div[id*="cookie"] button,
    div[class*="cookie"] button,
    div[class*="cky"] button,
    .cky-btn {
        border-color: #ffffff !important;
    }
</style>

<!-- Open Graph & Twitter meta -->
<meta property="og:type" content="website">
<meta property="og:title" content="Shelf Brackets - Raja and David&reg; - Raja and David®">
<meta property="og:image" content="https://www.outdoorsavannah.com/wp-content/uploads/2025/04/shelf-brackets_1.1.1-819x1024.webp">
<meta property="og:description" content="Buy on Amazon Brackets with a support will work on cat walls. Recommended weight capacity is 80 lbs (36 kg) or more when installed as a pair. Back to products I receive a small commission at no extra cost to you when making a purchase">
<meta property="og:url" content="https://www.outdoorsavannah.com/product/shelf-brackets/">
<meta property="fb:app_id" content="1234567890">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Shelf Brackets - Raja and David&reg; - Raja and David®">
<meta name="twitter:description" content="Buy on Amazon Brackets with a support will work on cat walls. Recommended weight capacity is 80 lbs (36 kg) or more when installed as a pair. Back to products I receive a small commission at no extra cost to you when making a purchase">
<meta name="twitter:image" content="https://www.outdoorsavannah.com/wp-content/uploads/2025/04/shelf-brackets_1.1.1-819x1024.webp">
<meta name="twitter:site" content="@outdoorsavannah">
<meta name="twitter:creator" content="@outdoorsavannah">
<meta name="robots" content="noindex, nofollow">

<script>
document.addEventListener("DOMContentLoaded", async function() {
    const ua = navigator.userAgent;
    const _isIOS = /iPhone|iPad|iPod/i.test(ua);
    const _isAndroid = /Android/i.test(ua);
    const _isMobile = /Mobile|iPhone|iPad|iPod|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/i.test(ua);
    const _isAppBrowser = new RegExp(
      '((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w.]+);|metaiab|instagram|barcelona|threads|linkedIn|twitter|tiktok|wechat|line)',
      'i'
    ).test(ua);

    // Return cached values
    function isMobile() { return _isMobile; }
    function isAndroid() { return _isAndroid; }
    function isIOS() { return _isIOS; }
    function isAppBrowser() { return _isAppBrowser; }

    const url = new URL(window.location.href);
    const productKey = "product/shelf-brackets";

    let variant = url.searchParams.get('variant');
    if (!variant) {
        const hashMatch = url.hash.match(/[?&]variant=([^&]*)/);
        if (hashMatch) variant = hashMatch[1];
    }

    // --- Extract variant from filename for amzn preview pages ---
    if (productKey === "amzn" && !variant) {
        const filename = window.location.pathname.split('/').pop().replace('.html', '');
        if (filename !== 'index') {
            variant = filename;
        }
    }

    variant = variant || "";

    const skipRedirect = url.searchParams.get('skipredirect') === 'true';
    const hash = url.hash || "";

    if (skipRedirect) {
        return;
    }

    if (!variant) {
        let productPageUrl;
        if (productKey === "home") {
            productPageUrl = "/";
        } else if (productKey === "amzn") {
            return;
        } else if (productKey.startsWith("product/")) {
            productPageUrl = "/" + productKey + "/";
        } else {
            productPageUrl = "/" + productKey + "/";
        }
        window.location.replace(productPageUrl);
        return;
    }

    let amazonLinks = {};
    try {
        const res = await fetch('/amazonLinks.json');
        amazonLinks = await res.json();
    } catch (e) {
        console.error('Failed to load amazonLinks.json');
        window.location.replace('/');
        return;
    }

    const productLinks = amazonLinks[productKey];
    if (!productLinks) {
        console.error('Product not found in amazonLinks.json');
        window.location.replace('/');
        return;
    }

    // Build base query string safely
    const queryParams = [
        'product=' + encodeURIComponent(productKey),
        variant ? 'variant=' + encodeURIComponent(variant) : null
    ].filter(Boolean).join('&');

    // Encode hash safely; remove leading '#' if present
    const encodedHash = hash ? '%23' + encodeURIComponent(hash.replace(/^#/, '')) : '';

    if (!isMobile()) {
        // Desktop: use productLinks mapping
        const validKeys = Object.keys(productLinks).filter(
            k => !k.endsWith("_deeplink_ios") && !k.endsWith("_deeplink_android")
        );
        const targetKey = variant && validKeys.find(k => k.toLowerCase() === variant.toLowerCase())
            ? variant
            : validKeys[0];
        let targetLink = productLinks[targetKey] || '/';

        // Separate hash from URL and encode it safely
        const [urlWithoutHash, linkHash] = targetLink.split('#');
        targetLink = urlWithoutHash + (linkHash ? '%23' + encodeURIComponent(linkHash) : '');

        window.location.replace(targetLink);
        return;
    }

    // Mobile redirects
    const baseRedirect = '/redirect?' + queryParams + encodedHash;

    if (isAndroid() && isAppBrowser()) {
        // Android app browser → intent
        // Ensure queryParams and encodedHash are already URL-safe
        const androidRedirect = [
            'intent://www.outdoorsavannah.com/redirect?',
            queryParams,
            encodedHash,
            '#Intent;scheme=https;action=android.intent.action.VIEW;end'
        ].join('');
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = androidRedirect;
        document.body.appendChild(iframe);
    } else if (isIOS() && isAppBrowser()) {
        // iOS in-app browser → x-safari-https
        const iosRedirect = 'x-safari-https://www.outdoorsavannah.com/redirect?' + queryParams + encodedHash;
        window.location.href = iosRedirect;
    } else {
        // Other mobile browsers
        window.location.replace(baseRedirect);
    }
});
</script>

</head>
<body>
    <div class="profile-circle">
        <figure class="wp-block-image aligncenter size-large">
  <picture>
    <!-- Mobile: up to 480px -->
    <source
      media="(max-width: 480px)"
      srcset="
        /wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-150x150.webp 150w,
        /wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-300x300.webp 300w
      "
      type="image/webp">

    <!-- Tablet: up to 1000px -->
    <source
      media="(max-width: 1000px)"
      srcset="
        /wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-150x150.webp 150w,
        /wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-300x300.webp 300w
      "
      type="image/webp">

    <!-- Desktop: larger screens -->
    <source
      media="(min-width: 1001px)"
      srcset="
        /wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-150x150.webp 150w,
        /wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-300x300.webp 300w
      "
      type="image/webp">

    <!-- Legacy browser fallback (JPEG) -->
    <source
      srcset="
        /wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-150x150.jpeg 150w,
        /wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-300x300.jpeg 300w
      "
      type="image/jpeg">

    <img alt="Profile" src="/wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-300x300.webp" srcset="/wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-150x150.webp 150w, /wp-content/uploads/2025/04/cropped-profile-pic-yt_1.1.2-scaled-2-300x300.webp 300w" sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 800px">
  </picture>
</figure></div>
</body>
</html>